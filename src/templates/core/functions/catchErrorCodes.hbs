

export const catchErrorCodes = (options: ApiRequestOptions, ok: boolean, status: number, statusText: string, body: any): string | undefined => {
	const errors: Record<number, string> = {
		400: 'Bad Request',
		401: 'Unauthorized',
		403: 'Forbidden',
		404: 'Not Found',
		500: 'Internal Server Error',
		502: 'Bad Gateway',
		503: 'Service Unavailable',
		...options.errors,
	}

	const error = errors[status];
	if (error) {
		return error;
	}

	if (!ok) {
		const errorStatus = status ?? 'unknown';
		const errorStatusText = statusText ?? 'unknown';
		const errorBody = (() => {
			try {
				return JSON.stringify(body, null, 2);
			} catch (e) {
				return undefined;
			}
		})();

		return `Generic Error: status: ${errorStatus}; status text: ${errorStatusText}; body: ${errorBody}`;
	}

	return undefined;
};
